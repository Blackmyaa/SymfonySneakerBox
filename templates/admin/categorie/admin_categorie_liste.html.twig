{% extends 'base.html.twig' %}

{% block title %}Admin - Produits de la catégorie
	{{ categories.nom }}
{% endblock %}
{% block stylesheets %}
	<style>
		.max-lines{ //class pour limiter le nombre de lignes visibles sur la card de chaque produit
			--max_lines : 3;
			overflow: hidden;
			display: -webkit-box;
			-webkit-line-clamp: var(--max_lines);
			line-clamp: var(--max_lines);
			-webkit-box-orient: vertical;
		}
	</style>
{% endblock %}
{% block body %}
    {% include "tools/dashNav.html.twig" %}
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 container">
				{% include "tools/messageFlash.html.twig" %}

                <h1 class="h2">Liste des produits de la catégorie {{categories.nom}}:</h1>
                <div class="row mt-3">
                    <div class="col-lg-8 border-dark border-end">
                        <table class="table table-striped table-bordered justify-content">
                            <thead>
                                <tr>
                                    <th scope="col" class="text-center">Nom</th>
                                    <th scope="col" class="text-center">Description</th>
									<th scope="col" class="text-center">Stock</th>
									<th scope="col" class="text-center">Prix(€)</th>
                                </tr>
                            </thead>

                            <tbody>
                            {% for produits in categories.produits %}
                                <tr>
                                    <td class="text-center">{{produits.nom}}</td>
									<td class="text-center">{{produits.description}}</td>
									<td class="text-center">{{produits.stock}}</td>
									<td class="text-center">{{produits.prix / 100}}</td>
									
									<td class="text-center">
                                        <a type="button" class="btn btn-secondary text-white" href="#">
                                            Voir
                                        </a>
                                    </td>
                                </tr>
                                {% else %}
                                    <tr>
                                        <td colspan="5" class="text-center">Cette catégorie est vide</td>
                                    </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="col-lg-4">
                        <div class="col-lg-12 text-end mb-4">
                            <a class="btn btn-secondary" href="/admin/categorie">Liste catégories</a>
                        </div>

                        <div class="col-lg-12">
                            <div class="mb-3">
                                <label class="form-label">Nombre de produits différents:</label>
                                <input type="text" class="form-control" aria-label="Dollar amount (with dot and two decimal places)" readonly value="{{nombreRef}}">
                            </div>
                        </div>

                        <div class="col-lg-12">
                            <div class="mb-3">
                                <label class="form-label">Quantité de produits:</label>
                                <input type="text" class="form-control" aria-label="Dollar amount (with dot and two decimal places)" readonly value="{{stockTotalCat}} {{pieces}}">
                            </div>
                        </div>

                        <div class="col-lg-12">
                            <div class="mb-3">
                                <label class="form-label">Prix de vente total:</label>
                                <input type="text" class="form-control" aria-label="Dollar amount (with dot and two decimal places)" readonly value="{{prixTotalCat}}€">
                            </div>
                        </div>

                        <div class="col-lg-12">
                            <div class="mb-3">
                                <label class="form-label">Prix de vente moyen:</label>
                                <input type="text" class="form-control" aria-label="Dollar amount (with dot and two decimal places)" readonly value="{{prixMoyen}}€/article">
                            </div>
                        </div>
                    </div>
                </div>
                
                
            </main>
        </div>
    </div>    </div>
</div>
{% endblock %}
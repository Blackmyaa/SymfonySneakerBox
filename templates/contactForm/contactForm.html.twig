{# templates/contact/index.html.twig #}
{% extends 'base.html.twig' %}
{% block title %}Contactez-nous{% endblock %}
{% block body %}
	{% include "tools/userNav.html.twig" %}
	<main class="container">
		<section class="row">
            <div class="col-lg-8 mx-auto mt-3 border rounded border-dark">
                <h1>Contactez-nous</h1>

                {% for message in app.flashes('success') %}
                    <div class="alert alert-success">
                        {{ message }}
                    </div>
                {% endfor %}

                {{ form_start(form) }}
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="form-group mt-3">
                                {{ form_label(form.nom) }}
                                {{ form_widget(form.nom, {'attr': {'class': 'form-control'}}) }}
                                {{ form_errors(form.nom) }}
                            </div>

                            <div class="form-group">
                                {{ form_label(form.prenom) }}
                                {{ form_widget(form.prenom, {'attr': {'class': 'form-control'}}) }}
                                {{ form_errors(form.prenom) }}
                            </div>
                        </div>


                        <div class="col-lg-6">
                            <div class="form-group mt-3">
                                {{ form_label(form.sujet) }}
                                {{ form_widget(form.sujet, {'attr': {'class': 'form-control'}}) }}
                                {{ form_errors(form.sujet) }}
                            </div>

                            <div class="form-group" id="autre-sujet-group" style="display: none;">
                                <label for="autre_sujet">Votre sujet:</label> 
                                <input type="text" id="autre_sujet" name="autre_sujet" class="form-control"> 
                            </div>
                        </div>
                    </div>


                    <div class="form-group">
                        {{ form_label(form.email) }}
                        {{ form_widget(form.email, {'attr': {'class': 'form-control'}}) }}
                        {{ form_errors(form.email) }}
                    </div>

                    <div class="form-group">
                        {{ form_label(form.message) }}
                        {{ form_widget(form.message, {'attr': {'class': 'form-control'}}) }}
                        {{ form_errors(form.message) }}
                    </div>

                    <button type="submit" class="btn btn-success mt-3">Envoyer</button>
                {{ form_end(form) }}
            </div>
        </section>
    </main>
{% include "tools/footer.html.twig" %}
    <script> 
    document.getElementById('contact_form_sujet').addEventListener('change', function() { 
        var autreSujetGroup = document.getElementById('autre-sujet-group'); 
        if (this.value === 'autre') { 
            autreSujetGroup.style.display = 'block'; 
        } else { 
            autreSujetGroup.style.display = 'none'; 
        } 
    });

    document.getElementById('contact-form').addEventListener('keypress', function(event) { 
        if (event.key === 'Enter') { event.preventDefault(); 
        // Empêcher l'action par défaut 
        this.submit(); 
        // Soumettre le formulaire 
        } 
    });
    
    </script>
{% endblock %}
